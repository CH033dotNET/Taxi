@{
    Layout = null;
}

<form role="form" id="form">
	<div class="form-group">
		<div class="form-group-header">
			<div class="label-underline underline-gray">
				<label class="label-title">@Resources.Resource.Additional</label>
			</div>
			<div class="align-right">
				<span id="show"></span>
				<span id="hide"></span>
			</div>
		</div>
		<div class="form-group-body" id="additional">
			<div class="row">
				<label class="col-sm-3 form-control-label">@Resources.Resource.WhenToGo</label>
				<div class="col-sm-9 radio-box form-inline">
					<label class="radio-inline"><input type="radio" id="urgently" name="urgency" checked><span></span>@Resources.Resource.Urgently</label>
					<label class="radio-inline"><input type="radio" id="pre-order" name="urgency"><span></span>@Resources.Resource.PreOrder</label>
					<div class="input-group bootstrap-datetimepicker datetimepicker" id="time-group">
						<input type="text" id="time" class="form-control" />
						<span class="input-group-addon">
							<span class="glyphicon icon-time"></span>
						</span>
					</div>
				</div>
			</div>
			<div class="row">
				<label class="col-sm-3 form-control-label">@Resources.Resource.ClassOfCar</label>
				<div class="col-sm-9 button-box">
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.Normal"><input type="radio" id="normal" name="car-class" checked><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.Universal"><input type="radio" id="universal" name="car-class"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.Minivan"><input type="radio" id="minivan" name="car-class"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.Lux"><input type="radio" id="lux" name="car-class"><span></span></label>
				</div>
			</div>
			<div class="row">
				<label class="col-sm-3 form-control-label">@Resources.Resource.Additionally</label>
				<div class="col-sm-8 button-box">
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.Courier"><input type="checkbox" id="courier"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.WithPlate"><input type="checkbox" id="with-plate"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.MyCar"><input type="checkbox" id="my-car"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.WithPets"><input type="checkbox" id="pets"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.WithBaggage"><input type="checkbox" id="bag"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.Conditioner"><input type="checkbox" id="conditioner"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.WithEnglish"><input type="checkbox" id="english"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.NoSmoking"><input type="checkbox" id="nosmoking"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.Smoking"><input type="checkbox" id="smoking"><span></span></label>
					<label class="button-inline" data-toggle="tooltip" title="@Resources.Resource.WithCheck"><input type="checkbox" id="check"><span></span></label>
				</div>
			</div>
		</div>
	</div>
	<div id="cost-group">
		<label>Price: </label>
		<div id="cost">0.0</div>
	</div>
</form>

<select id="sTariff">
</select>

<button type="button" id="btnStart" class="btn btn-primary btn-lg" onclick="StartOrder()">Start</button>
<button type="button" id="btnStop" class="btn btn-primary btn-lg" onclick="StopOrder()" style="display:none;">Stop</button>

<script>
	var tariffs;
	var calculatorIntervalId;

	$(document).ready(function () {
		$.ajax({
			type: "POST",
			url: "/TariffEx/GetAllActiveTariffs"
		}).done(function (data) {
			tariffs = data;
			for (var i in data) {
				$('#sTariff').append('<option value="' + i + '">' + data[i].Name + '</option>');
			}
		});
	});

	function StartOrder() {
		$('#btnStart').hide();
		$('#btnStop').show();
		calculatorIntervalId = setInterval(CalculatePrice, 1500);
	}

	function StopOrder() {
		$('#btnStart').show();
		$('#btnStop').hide();
		clearInterval(calculatorIntervalId);
	}

	function CalculatePrice() {
		var selectedTariffIndex = $('#sTariff').val();
		var startPrice = 0;

		// Courier
		if (document.getElementById('courier').checked) {
			startPrice += tariffs[selectedTariffIndex].PriceCourierOption;
		}

		// Plate
		if (document.getElementById('with-plate').checked) {
			startPrice += tariffs[selectedTariffIndex].PricePlateOption;
		}
		
		$('#cost').html(startPrice);
	}
</script>

<script src="~/Scripts/OrderForm.js"></script>
<link href="~/Content/OrderForm.css" rel=stylesheet type="text/css">